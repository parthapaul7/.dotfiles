module.exports=function(n){var t={};function e(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return n[o].call(r.exports,r,r.exports,e),r.l=!0,r.exports}return e.m=n,e.c=t,e.d=function(n,t,o){e.o(n,t)||Object.defineProperty(n,t,{enumerable:!0,get:o})},e.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},e.t=function(n,t){if(1&t&&(n=e(n)),8&t)return n;if(4&t&&"object"==typeof n&&n&&n.__esModule)return n;var o=Object.create(null);if(e.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:n}),2&t&&"string"!=typeof n)for(var r in n)e.d(o,r,function(t){return n[t]}.bind(null,r));return o},e.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return e.d(t,"a",t),t},e.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},e.p="",e(e.s=8)}([function(n,t){n.exports=require("vscode")},function(n,t,e){"use strict";var o=this&&this.__awaiter||function(n,t,e,o){return new(e||(e=Promise))((function(r,i){function a(n){try{s(o.next(n))}catch(n){i(n)}}function c(n){try{s(o.throw(n))}catch(n){i(n)}}function s(n){var t;n.done?r(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(a,c)}s((o=o.apply(n,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.dontHideOutputOnSuccess=t.getYarnBin=t.useTerminal=t.getPackageJson=t.packageExists=t.pickPackageJson=void 0;const r=e(6),i=e(5),a=e(3),c=e(0);function s(){return o(this,void 0,void 0,(function*(){const n=c.window.activeTextEditor;if(n&&n.document.fileName.match("package.json"))return n.document.fileName;const t=c.workspace.workspaceFolders;if(void 0!==t){const n=[];if(t.forEach(t=>{const e=c.workspace.getConfiguration("yarn",t).packageJson,o=i.join(t.uri.fsPath,e);r.existsSync(o)&&n.push({name:t.name,fsPath:o})}),n.length>1){const t=n.map(n=>({label:n.name,description:n.fsPath})),e=yield c.window.showQuickPick(t,{ignoreFocusOut:!0,canPickMany:!1});return void 0===e?void a.noValueError():n.filter(n=>n.name===e.label)[0].fsPath}if(1===n.length)return n[0].fsPath}}))}function u(n){try{const t=r.statSync(n);return t&&t.isFile()}catch(n){return!1}}t.pickPackageJson=s,t.packageExists=u,t.getPackageJson=function(n){return o(this,void 0,void 0,(function*(){let t=null;return t=void 0!==n&&n.fsPath.length>=0?n.fsPath:yield s(),u(t)||a.noPackageError(),t}))},t.useTerminal=function(){return c.workspace.getConfiguration("yarn").runInTerminal},t.getYarnBin=function(){return c.workspace.getConfiguration("yarn").bin||"yarn"},t.dontHideOutputOnSuccess=function(){return c.workspace.getConfiguration("yarn").dontHideOutputOnSuccess}},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.runCommand=t.terminate=t.childs=t.terminal=void 0;const o=e(4),r=e(0),i=e(7),a=e(9),c=e(1),s=e(11);t.terminal=null,t.childs=new Map,t.terminate=function(n){const e=t.childs.get(n);e.child&&(i.outputChannel.appendLine(""),i.outputChannel.appendLine(`Killing process: ${e.cmd} (pid:${n})`),i.outputChannel.appendLine(""),e.killedByUs=!0,s(n,"SIGTERM"))},t.runCommand=function(n,e){const s=e.replace(/package.json$/i,""),u={cwd:s,env:process.env};(0,c.useTerminal)()?"function"==typeof r.window.createTerminal?function(n,e){const o=Array.from(n);t.terminal&&!t.terminal.exitStatus||(t.terminal=r.window.createTerminal("Yarn"));if(t.terminal.show(!0),e){const n=e.replace(/\\/g,"\\\\");t.terminal.sendText(["cd",`"${n}"`].join(" "))}o.splice(0,0,(0,c.getYarnBin)()),t.terminal.sendText(o.join(" "))}(n,s):function(n,t){(0,a.runInTerminal)((0,c.getYarnBin)(),n,t)}(n,u):function(n,e){const r=(0,c.getYarnBin)()+" "+n.join(" "),a=(0,o.exec)(r,{cwd:e,env:process.env});t.childs.set(a.pid,{child:a,cmd:r}),a.on("exit",(n,e)=>{("SIGTERM"===e||t.childs.get(a.pid).killedByUs)&&(i.outputChannel.appendLine(""),i.outputChannel.appendLine("Successfully killed process"),i.outputChannel.appendLine(""),i.outputChannel.appendLine("--------------------"),i.outputChannel.appendLine("")),0===n&&(i.outputChannel.appendLine(""),i.outputChannel.appendLine("--------------------"),i.outputChannel.appendLine(""),(0,c.dontHideOutputOnSuccess)()||i.outputChannel.hide()),t.childs.delete(a.pid)}),i.outputChannel.appendLine(r),i.outputChannel.appendLine("");const s=function(n){i.outputChannel.append(n)};a.stderr.on("data",s),a.stdout.on("data",s),i.outputChannel.show(!0)}(n,s)}},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.invalidTagError=t.noValueError=t.createdInfo=t.cannotWriteError=t.noScriptsInfo=t.noBuildScript=t.noStartScript=t.noTestScript=t.noLastScript=t.noProjectOpenError=t.alreadyExistsError=t.noPackageError=void 0;const o=e(0);t.noPackageError=function(){o.window.showErrorMessage("Cannot read 'package.json'")},t.alreadyExistsError=function(){o.window.showErrorMessage("'package.json' already exists")},t.noProjectOpenError=function(){o.window.showErrorMessage("No project open")},t.noLastScript=function(){o.window.showErrorMessage("No script executed yet")},t.noTestScript=function(){o.window.showErrorMessage("No test script in your package.json file")},t.noStartScript=function(){o.window.showErrorMessage("No start script in your package.json file")},t.noBuildScript=function(){o.window.showErrorMessage("No build script in your package.json file")},t.noScriptsInfo=function(){o.window.showInformationMessage("No scripts are defined in 'package.json'")},t.cannotWriteError=function(){o.window.showErrorMessage("Cannot write 'package.json'")},t.createdInfo=function(){o.window.showInformationMessage("'package.json' created successfuly")},t.noValueError=function(){o.window.showErrorMessage("No value entered")},t.invalidTagError=function(){o.window.showErrorMessage("Tag is invalid")}},function(n,t){n.exports=require("child_process")},function(n,t){n.exports=require("path")},function(n,t){n.exports=require("fs")},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.outputChannel=void 0;const o=e(0).window.createOutputChannel("yarn");t.outputChannel=o},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deactivate=t.activate=void 0;const o=e(0),r=e(7),i=e(2),a=e(12),c=e(13),s=e(14),u=e(15),d=e(16),l=e(17),p=e(18),f=e(19),m=e(20);t.activate=function(n){const t=[o.commands.registerCommand("yarn-script.installPackages",c.yarnInstallPackages),o.commands.registerCommand("yarn-script.addPackages",s.yarnAddPackages),o.commands.registerCommand("yarn-script.addPackage",s.yarnAddPackage),o.commands.registerCommand("yarn-script.addPackageDev",s.yarnAddPackageDev),o.commands.registerCommand("yarn-script.runScript",d.yarnRunScript),o.commands.registerCommand("yarn-script.build",d.yarnBuild),o.commands.registerCommand("yarn-script.runScriptLast",d.yarnRunLastScript),o.commands.registerCommand("yarn-script.init",a.default),o.commands.registerCommand("yarn-script.outdated",m.yarnOutdated),o.commands.registerCommand("yarn-script.removePackage",u.yarnRemovePackage),o.commands.registerCommand("yarn-script.publish",l.yarnPublish),o.commands.registerCommand("yarn-script.raw",p.yarnRawCommand),o.commands.registerCommand("yarn-script.terminate",f.default),o.commands.registerCommand("yarn-script.test",d.yarnTest),o.commands.registerCommand("yarn-script.start",d.yarnStart)];n.subscriptions.push(...t,r.outputChannel)},t.deactivate=function(){i.terminal&&i.terminal.dispose()}},function(n,t,e){"use strict";(function(n){var o=e(4),r=e(5),i=e(10);t.runInTerminal=function(n,t,e){return a(n,t||[],e).then((function(n){var t=n;return t.kill2=function(){return c(n)},t}))};var a=/^win/.test(process.platform)?function(n,t,e){return t=["/c","start","/wait","cmd.exe","/c",'"'+n+" "+t.map(u).join(" ")+' & pause"'],(e=e||{}).windowsVerbatimArguments=!0,s("cmd.exe",t,e)}:"darwin"===process.platform?function(t,e,o){return s("/usr/bin/osascript",e=[r.join(n,"launcher.scpt"),"cd",i.format("'%s'",o.cwd),";",t].concat(e),o)}:function(n,t,e){var o="";t.length>0&&(o='"'+t.join('" "')+'"');var r="";e.cwd&&(r=i.format('cd "%s"',e.cwd));var a=i.format('%s; "%s" %s ; echo; read -p "%s" -n1;',r,n,o,"Press any key to continue...");return s("/usr/bin/gnome-terminal",t=["-x","bash","-c",i.format("''%s''",a)],e)},c=/^win/.test(process.platform)?function(n){if(n)return new Promise((function(t,e){n.once("exit",(function(n,e){t(n)})),o.exec("taskkill /F /T /PID "+n.pid,(function(n,t,o){n&&e(n)}))}))}:function(n){if(n)return new Promise((function(t,e){n.once("exit",(function(n,e){t(n)})),n.once("error",(function(n){e(n)})),n.kill("SIGTERM")}))};function s(n,t,e){return new Promise((function(r,i){var a=o.spawn(n,t,e);a.on("error",i),setTimeout((function(n){return r(a)}),0)}))}function u(n){return n&&-1!==n.indexOf(" ")&&'"'!==n[0]&&'"'!==n[n.length-1]?'"'+n+'"':n}}).call(this,"/")},function(n,t){n.exports=require("util")},function(n,t,e){"use strict";var o=e(4),r=o.spawn,i=o.exec;function a(n,t,e){var o={};try{Object.keys(n).forEach((function(e){n[e].forEach((function(n){o[n]||(c(n,t),o[n]=1)})),o[e]||(c(e,t),o[e]=1)}))}catch(n){if(e)return e(n);throw n}if(e)return e()}function c(n,t){try{process.kill(parseInt(n,10),t)}catch(n){if("ESRCH"!==n.code)throw n}}function s(n,t,e,o,r){var i=o(n),a="";i.stdout.on("data",(function(n){n=n.toString("ascii");a+=n}));i.on("close",(function(i){delete e[n],0==i?a.match(/\d+/g).forEach((function(i){i=parseInt(i,10),t[n].push(i),t[i]=[],e[i]=1,s(i,t,e,o,r)})):0==Object.keys(e).length&&r()}))}n.exports=function(n,t,e){if("function"==typeof t&&void 0===e&&(e=t,t=void 0),n=parseInt(n),Number.isNaN(n)){if(e)return e(new Error("pid must be a number"));throw new Error("pid must be a number")}var o={},c={};switch(o[n]=[],c[n]=1,process.platform){case"win32":i("taskkill /pid "+n+" /T /F",e);break;case"darwin":s(n,o,c,(function(n){return r("pgrep",["-P",n])}),(function(){a(o,t,e)}));break;default:s(n,o,c,(function(n){return r("ps",["-o","pid","--no-headers","--ppid",n])}),(function(){a(o,t,e)}))}}},function(n,t,e){"use strict";var o=this&&this.__awaiter||function(n,t,e,o){return new(e||(e=Promise))((function(r,i){function a(n){try{s(o.next(n))}catch(n){i(n)}}function c(n){try{s(o.throw(n))}catch(n){i(n)}}function s(n){var t;n.done?r(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(a,c)}s((o=o.apply(n,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=e(6),i=e(5),a=e(0),c=e(3),s=e(1);t.default=function(){return o(this,void 0,void 0,(function*(){const n=yield(0,s.pickPackageJson)();if(null===n)return void c.noProjectOpenError();if((0,s.packageExists)(n))return void c.alreadyExistsError();const t=i.basename(n),e={name:t,version:"1.0.0",description:"",main:"index.js",scripts:{test:'echo "Error: no test specified" && exit 1'},author:"",license:"ISC"};a.window.showInputBox({prompt:"Package name",placeHolder:"Package name...",value:t}).then(n=>(n&&(e.name=n.toLowerCase()),a.window.showInputBox({prompt:"Version",placeHolder:"1.0.0",value:"1.0.0"}))).then(n=>(n&&(e.version=n.toString()),a.window.showInputBox({prompt:"Description",placeHolder:"Package description"}))).then(n=>(n&&(e.description=n.toString()),a.window.showInputBox({prompt:"main (entry point)",value:"index.js"}))).then(n=>(n&&(e.main=n.toString()),a.window.showInputBox({prompt:"Test script"}))).then(n=>(n&&(e.scripts.test=n.toString()),a.window.showInputBox({prompt:"Author"}))).then(n=>(n&&(e.author=n.toString()),a.window.showInputBox({prompt:"License",value:"ISC"}))).then(t=>{t&&(e.license=t.toString());const o=JSON.stringify(e,null,4);r.writeFile(n,o,t=>{t?c.cannotWriteError():(c.createdInfo(),a.workspace.openTextDocument(n).then(n=>{a.window.showTextDocument(n)}))})})}))}},function(n,t,e){"use strict";var o=this&&this.__awaiter||function(n,t,e,o){return new(e||(e=Promise))((function(r,i){function a(n){try{s(o.next(n))}catch(n){i(n)}}function c(n){try{s(o.throw(n))}catch(n){i(n)}}function s(n){var t;n.done?r(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(a,c)}s((o=o.apply(n,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.yarnInstallPackages=void 0;const r=e(1),i=e(2);t.yarnInstallPackages=function(n){return o(this,void 0,void 0,(function*(){const t=yield(0,r.getPackageJson)(n);null!==t&&(0,i.runCommand)(["install"],t)}))}},function(n,t,e){"use strict";var o=this&&this.__awaiter||function(n,t,e,o){return new(e||(e=Promise))((function(r,i){function a(n){try{s(o.next(n))}catch(n){i(n)}}function c(n){try{s(o.throw(n))}catch(n){i(n)}}function s(n){var t;n.done?r(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(a,c)}s((o=o.apply(n,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.yarnAddPackageDev=t.yarnAddPackage=t.yarnAddPackages=void 0;const r=e(0),i=e(1),a=e(3),c=e(2);t.yarnAddPackages=function(n){return o(this,void 0,void 0,(function*(){const t=yield(0,i.getPackageJson)(n);null!==t&&(0,c.runCommand)(["add"],t)}))},t.yarnAddPackage=function(n){return s(!1,n)},t.yarnAddPackageDev=function(n){return s(!0,n)};const s=function(n,t){return o(this,void 0,void 0,(function*(){const e=yield(0,i.getPackageJson)(t);null!==e&&r.window.showInputBox({prompt:"Package to add",placeHolder:"lodash, underscore, ..."}).then(t=>{if(!t)return void a.noValueError();const o=t.split(" "),r=o.find(n=>"-D"===n||"--dev"===n||"-O"===n||"--optional"===n||"-E"===n||"--exact"===n),i=["add",...o];if(r)(0,c.runCommand)(i,e);else{const t=n?"--dev":"";(0,c.runCommand)([...i,t],e)}})}))}},function(n,t,e){"use strict";var o=this&&this.__awaiter||function(n,t,e,o){return new(e||(e=Promise))((function(r,i){function a(n){try{s(o.next(n))}catch(n){i(n)}}function c(n){try{s(o.throw(n))}catch(n){i(n)}}function s(n){var t;n.done?r(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(a,c)}s((o=o.apply(n,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.yarnRemovePackage=void 0;const r=e(0),i=e(1),a=e(3),c=e(2);t.yarnRemovePackage=function(n){return o(this,void 0,void 0,(function*(){const t=yield(0,i.getPackageJson)(n);null!==t&&r.window.showInputBox({prompt:"Package to remove",placeHolder:"lodash, underscore, ..."}).then(n=>{if(!n)return void a.noValueError();const e=["remove",...n.split(" ")];(0,c.runCommand)(e,t)})}))}},function(n,t,e){"use strict";var o=this&&this.__awaiter||function(n,t,e,o){return new(e||(e=Promise))((function(r,i){function a(n){try{s(o.next(n))}catch(n){i(n)}}function c(n){try{s(o.throw(n))}catch(n){i(n)}}function s(n){var t;n.done?r(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(a,c)}s((o=o.apply(n,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.yarnRunLastScript=t.yarnBuild=t.yarnStart=t.yarnTest=t.yarnRunScript=void 0;const r=e(6),i=e(0),a=e(3),c=e(2),s=e(1);let u;t.yarnRunScript=function(n){return o(this,void 0,void 0,(function*(){const t=yield(0,s.getPackageJson)(n);if(null===t)return;const e=d(t);if(!e)return;const o=Object.keys(e).map(n=>({label:n,description:e[n]}));i.window.showQuickPick(o).then(n=>{u={packageJson:t,script:n.label},(0,c.runCommand)(["run",n.label],t)})}))},t.yarnTest=function(n){return o(this,void 0,void 0,(function*(){const t=yield(0,s.getPackageJson)(n);if(null===t)return;const e=d(t);e&&(e.test?(u={packageJson:t,script:"test"},(0,c.runCommand)(["run","test"],t)):a.noTestScript())}))},t.yarnStart=function(n){return o(this,void 0,void 0,(function*(){const t=yield(0,s.getPackageJson)(n);if(null===t)return;const e=d(t);e&&(e.start?(u={packageJson:t,script:"start"},(0,c.runCommand)(["run","start"],t)):a.noStartScript())}))},t.yarnBuild=function(n){return o(this,void 0,void 0,(function*(){const t=yield(0,s.getPackageJson)(n);if(null===t)return;const e=d(t);e&&(e.build?(u={packageJson:t,script:"build"},(0,c.runCommand)(["run","build"],t)):a.noBuildScript())}))},t.yarnRunLastScript=function(){return o(this,void 0,void 0,(function*(){if(u){const n=u.packageJson;if(null!==n&&!(0,s.packageExists)(n))return void a.noPackageError();(0,c.runCommand)(["run",u.script],n)}else a.noLastScript()}))};const d=function(n){try{const t=r.readFileSync(n).toString(),e=JSON.parse(t);return e.scripts?e.scripts:(a.noScriptsInfo(),null)}catch(n){return a.noPackageError(),null}}},function(n,t,e){"use strict";var o=this&&this.__awaiter||function(n,t,e,o){return new(e||(e=Promise))((function(r,i){function a(n){try{s(o.next(n))}catch(n){i(n)}}function c(n){try{s(o.throw(n))}catch(n){i(n)}}function s(n){var t;n.done?r(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(a,c)}s((o=o.apply(n,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.yarnPublish=void 0;const r=e(0),i=e(1),a=e(3),c=e(2);t.yarnPublish=function(n){return o(this,void 0,void 0,(function*(){const t=yield(0,i.getPackageJson)(n);null!==t&&r.window.showInputBox({prompt:"Optional tag (enter to skip tag)",placeHolder:"latest, 1.0.0, ..."}).then(n=>{n?n.includes(" ")?a.invalidTagError():(0,c.runCommand)(["publish","--tag",n],t):(0,c.runCommand)(["publish"],t)})}))}},function(n,t,e){"use strict";var o=this&&this.__awaiter||function(n,t,e,o){return new(e||(e=Promise))((function(r,i){function a(n){try{s(o.next(n))}catch(n){i(n)}}function c(n){try{s(o.throw(n))}catch(n){i(n)}}function s(n){var t;n.done?r(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(a,c)}s((o=o.apply(n,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.yarnRawCommand=void 0;const r=e(0),i=e(1),a=e(3),c=e(2);t.yarnRawCommand=function(){return o(this,void 0,void 0,(function*(){const n=yield(0,i.pickPackageJson)();(0,i.packageExists)(n)?r.window.showInputBox({prompt:"yarn command",placeHolder:"install lodash@latest, ..."}).then(t=>{if(!t)return void a.noValueError();const e=t.split(" ");(0,c.runCommand)(e,n)}):a.noPackageError()}))}},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=e(2),r=e(1),i=e(0);class a{constructor(n,t,e){this.label=n,this.description=t,this.pid=e}}t.default=function(){if((0,r.useTerminal)())i.window.showInformationMessage('Killing is only supported when the setting "runInTerminal" is "false"');else{const n=[];o.childs.forEach(t=>{n.push(new a(t.cmd,`(pid: ${t.child.pid})`,t.child.pid))}),i.window.showQuickPick(n).then(n=>{n&&(0,o.terminate)(n.pid)})}}},function(n,t,e){"use strict";var o=this&&this.__awaiter||function(n,t,e,o){return new(e||(e=Promise))((function(r,i){function a(n){try{s(o.next(n))}catch(n){i(n)}}function c(n){try{s(o.throw(n))}catch(n){i(n)}}function s(n){var t;n.done?r(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(a,c)}s((o=o.apply(n,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.yarnOutdated=void 0;const r=e(1),i=e(2);t.yarnOutdated=function(n){return o(this,void 0,void 0,(function*(){const t=yield(0,r.getPackageJson)(n);null!==t&&(0,i.runCommand)(["outdated"],t)}))}}]);
//# sourceMappingURL=extension.js.map